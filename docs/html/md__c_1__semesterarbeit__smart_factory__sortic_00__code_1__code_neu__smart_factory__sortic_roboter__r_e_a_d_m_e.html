<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SmartFactory_SorticRoboter: SmartFactory_SorticRoboter</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SmartFactory_SorticRoboter
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SmartFactory_SorticRoboter </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter">SmartFactory_SorticRoboter</a> is an implementation of the SmartFactory project for Sortic. The <a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter">SmartFactory_SorticRoboter</a> scans the rfid chip from a package and sort the package to a suitable <a href="https://github.com/LMazzole/SmartFactory_Box-Sortic">SmartFactory_Box-Sortic</a> to deliver the package. To communicate with the <a href="https://github.com/LMazzole/SmartFactory_Box-Sortic">SmartFactory_Box-Sortic</a> the <a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter">SmartFactory_SorticRoboter</a> is in connection with the <a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter_CommunicationHub">SmartFactory_SorticRoboter_CommunicationHub</a>. The connection is made via an I2C data bus.</p>
<p>The programmed algorithm is based on the finite state machine design pattern. The design pattern allows to give the robot a state and to change it to another state by events. The robot is built by different nested state machines and thus executes its tasks.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Table of contents</h1>
<ul>
<li>Working area</li>
<li>Tools and technologies<ul>
<li>Visual Studio Code</li>
<li>Doxygen</li>
<li>I2C</li>
<li>SPI</li>
<li>RFID</li>
<li>Ultrasound</li>
</ul>
</li>
<li>Hardware<ul>
<li>Sortic Robot<ul>
<li>Arduino Uno</li>
<li>Arduino Motor Shield</li>
<li>LEGO Motor</li>
<li>MFRC522</li>
</ul>
</li>
</ul>
</li>
<li>Software<ul>
<li>Finite State Machine</li>
<li>UML</li>
<li>Dependency Graph</li>
<li>Collaboration Diagram</li>
</ul>
</li>
<li>ToDo's</li>
<li>Contributors</li>
<li>Changelog</li>
<li>License</li>
<li>Links to SmartFactory</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Systemarchitecture SmartFactory</h1>
<p>The following diagram shows the system architecture of the SmartFactory.</p>
<p><img src="https://github.com/philipzellweger/SmartFactory_SorticRoboter/blob/master/docs/Systemarchitektur_SmartFactory.jpg" alt="systemarchitecture" class="inline"/></p>
<p>[Image: SmartFactory system architecture]</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Working area</h1>
<p>The existing sorting robot is designed with three transition lines. The number of lines can be extended modularly. In addition (to the three lines) the system has a upload line to load the packages.</p>
<p><img src="https://github.com/philipzellweger/SmartFactory_SorticRoboter/blob/master/docs/SorticRoboter_Workingarea.jpg" alt="workingarea" class="inline"/></p>
<p>[Image: SorticRoboter workingarea]</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Tools and technologies</h1>
<p>The source code is implemented in the programming language C++. In the following, the tools for editing the project are listed.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Visual Studio Code</h3>
<p>The development environment used is <a href="https://code.visualstudio.com/">Visual Studio Code</a> with the <a href="https://docs.platformio.org/en/latest/ide/vscode.html">PlatformIO extension</a>. The development environment can be downloaded open sourced. For an installation guide look <a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter/blob/master/docs/Installation_Guide_SmartFactory.pdf">here</a>. <br  />
</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Doxygen</h3>
<p>Doxygen was used for documenting the source code. For using Doxygen in Visual Studio code, the <a href="https://marketplace.visualstudio.com/items?itemName=cschlosser.doxdocgen">Doxygen Documentation Generator</a> extension is available.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
I2C</h3>
<p>The connection to the <a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter_CommunicationHub">SmartFactory_SorticRoboter_CommunicationHub</a> is via i2c. For an explanation of the technology and the library look <a href="https://github.com/philipzellweger/SmartFactory_I2cCommunication">here</a>.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
SPI</h3>
<p>The data on the rfid transponder is transmitted by the spi protocol. Spi is a serial data bus which is used to read the data of the rfid scanner. For an explanation of the technology look <a href="http://www.circuitbasics.com/basics-of-the-spi-communication-protocol/">here</a>.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
RFID</h3>
<p>The radio frequency identification technology is used to write and read the information of the package. This is a non-contact automatic transmitter receiver system based on the physical principle of a capacitor. Electromagnetic waves transmit the data from the transponder with the scanner. A detailed explanation can be found <a href="https://www.atlasrfidstore.com/rfid-beginners-guide/">here</a>.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
Ultrasound</h3>
<p>For the navigation of the robot, the position is measured by an ultrasonic sensor. The sensor emits sound waves and receives them again, so that the distance to an object can be determined. The sensor data is transmitted by the SPI protocol. A detailed explanation of the technology can be found <a href="https://www.maxbotix.com/articles/how-ultrasonic-sensors-work.htm">here</a>.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Hardware</h1>
<p>The elements used for the construction are built of Lego. Lego is used, as there are no real construction requirements in the project. It is needed to illustrate the SmartFactory concept. This principle can be applied to any conceivable installation. In addition Lego also reflects the modularity of the project.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
SorticRobot</h2>
<p>The Sortic robot is constructed as shown in the figure below. The robot consists of the following elements:</p><ul>
<li>Arduino Uno</li>
<li>Arduino Motorshield V2.0</li>
<li>Sonar HC-SR04</li>
<li>Lego Motor</li>
<li>MFRC522 RFID Reader</li>
<li>Sortic substructure based on LEGO</li>
</ul>
<p><img src="https://github.com/philipzellweger/SmartFactory_SorticRoboter/blob/master/docs/SorticRoboter_Konstruktion.jpg" alt="SorticRobot" class="inline"/></p>
<p>[Image: SmartFactory_SorticRoboter with robot arm]</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Arduino Uno</h3>
<p>The microcontroller used is an <a href="https://store.arduino.cc/arduino-uno-rev3">Arduino Uno</a>. For the existing system the memory and clock speed are sufficient, for a more complex system it is recommended to change to an <a href="https://store.arduino.cc/arduino-mega-2560-rev3">Arduino Mega</a>.</p>
<p><img src="https://www.distrelec.ch/Web/WebShopImages/landscape_large/6-/01/ArduinoUNO_SMD_A000073_30101956-01.jpg" alt="arduino uno" class="inline"/></p>
<p>[Image: <a href="https://www.distrelec.ch/de/arduino-uno-rev3-smd-arduino-a000073/p/30101956">Distrelec: Arduino Uno</a>]</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Arduino Motor Shield</h3>
<p>A motor shield is required to control the motor. The used <a href="https://store.arduino.cc/arduino-motor-shield-rev3">motorshield</a> is from Arduino and is compatible to the Arduino Uno and Arduino Mega.</p>
<p><img src="https://ardushop.hu/image/cache/catalog/termekek/arduino-motor-shield-v3-1_1-900x900.jpg" alt="motorshield" class="inline"/></p>
<p>[Image: <a href="https://ardushop.hu/arduino-motor-shield-rev3-ard35">ARDUSHOP: Arduino Motor Shield Rev3</a>]</p>
<h3><a class="anchor" id="autotoc_md15"></a>
LEGO Motor</h3>
<p>The <a href="https://www.lego.com/de-ch/product/lego-power-functions-xl-motor-8882">Lego motor</a> is used for the linear motion of the Sortic robot.</p>
<p><img src="https://www.meinbaukasten.de/media/catalog/product/cache/1/image/1000x1000/040ec09b1e35df139433887a97daa66f/l/e/lego-motor-xl-8882.jpg" alt="legomotor" class="inline"/></p>
<p>[Image: <a href="https://www.meinbaukasten.de/lego-power-functions-xl-motor-8882.html">Mein Baukasten: LEGO exucation Power Functions XL-Motor</a>]</p>
<h3><a class="anchor" id="autotoc_md16"></a>
MFRC522</h3>
<p>The sensor used to read the data on the rfid transponder is the <a href="https://www.yampe.com/product/details.jsp?curren=1&amp;la=3&amp;type=detail&amp;product_id=2883&amp;product_type_id=38&amp;brand_id=34">MFRC522</a> Rfid sensor.</p>
<p><img src="https://3.bp.blogspot.com/-LIRYnr98scs/WxPHATmSfdI/AAAAAAABIlA/UzwXyHHkqCQpFBX0bW4NZXvnm_ARMAEDQCPcBGAYYCw/s1600/arduino-rfid-rc522-esquema.png" alt="rfidscanner" class="inline"/></p>
<p>[Image: <a href="http://www.arduinotutorialonline.com/2018/06/arduino-nano-rfid-rc522-arduino-tutorial.html">Arduino Tutorial Online: RFID-RC522</a>]</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Software</h1>
<h3><a class="anchor" id="autotoc_md18"></a>
Finite State Machine</h3>
<p>The design pattern used to implement the software is the Finite State Machine. The robot always has a state. The states are transformed into other states by events. The figure below shows the finite state machine of the sortic robot seen in the blue area. The main state machine is the <a class="el" href="class_sortic_ctrl.html" title="Class to controll the FSM of the sortic controll.">SorticCtrl</a>, which contains the finite state machine <a class="el" href="class_detect_package_ctrl.html" title="The detect package controll class controlls the FSM to detect packages.">DetectPackageCtrl</a>, <a class="el" href="class_sort_package_ctrl.html" title="Class to controll the FSM of the sort package controll.">SortPackageCtrl</a> and NavigationCtrl.</p>
<p><img src="https://github.com/philipzellweger/SmartFactory_SorticRoboter/blob/master/docs/FSM_MASTER.jpg" alt="FSM" class="inline"/></p>
<p>[Image: Finite State Machine SorticRoboter with SorticRoboter CommunicationHub]</p>
<h3><a class="anchor" id="autotoc_md19"></a>
UML</h3>
<p>The figure below shows the data model in UML notation. A separate class has been implemented for each finite state machine.</p>
<p>================== IMAGE ===============================</p>
<h3><a class="anchor" id="autotoc_md20"></a>
Dependency Graph</h3>
<p>The figure below shows the dependency tree of the main FSM <a class="el" href="class_sortic_ctrl.html" title="Class to controll the FSM of the sortic controll.">SorticCtrl</a>. The used extern libraries for the project:</p><ul>
<li><a href="https://github.com/philipzellweger/SmartFactory_I2cCommunication">SmartFactory_I2cCommunication</a></li>
<li><p class="startli">MFRC522.h</p>
<p class="startli">==================== IMAGE ==================================</p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md21"></a>
Collaboration Diagram</h3>
<p>The figure below shows the collaboration tree of the main FSM <a class="el" href="class_sortic_ctrl.html" title="Class to controll the FSM of the sortic controll.">SorticCtrl</a>. The arrow simbolises an instanced object.</p>
<p>=================== IMAGE ==========================================</p>
<h1><a class="anchor" id="autotoc_md22"></a>
ToDo's</h1>
<ul>
<li>[ ]</li>
<li>[ ]</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Contributors</h1>
<ul>
<li><a href="https://github.com/philipzellweger">Philip Zellweger</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
Changelog</h1>
<p>V 1.0 - Release SA HS20 - <a href="https://github.com/philipzellweger">Philip Zellweger</a></p>
<h1><a class="anchor" id="autotoc_md25"></a>
License</h1>
<p>MIT License</p>
<h1><a class="anchor" id="autotoc_md26"></a>
Links to SmartFactory</h1>
<ul>
<li><a href="https://github.com/LMazzole/SmartFactory-Sortic">SmartFactory-Sortic</a></li>
<li><a href="https://github.com/LMazzole/SmartFactory_Box-Sortic">SmartFactory_Box-Sortic</a></li>
<li><a href="https://github.com/LMazzole/SmartFactory_Vehicle-Sortic">SmartFactory_Vehicle-Sortic</a></li>
<li><a href="https://github.com/LMazzole/SmartFactory_Vehicle-Basis">SmartFactory_Vehicle-Basis</a></li>
<li><a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter">SmartFactory_SorticRoboter</a></li>
<li><a href="https://github.com/philipzellweger/SmartFactory_SorticRoboter_CommunicationHub">SmartFactory_SorticRoboter_CommunicationHub</a></li>
<li><a href="https://github.com/LMazzole/SmartFactory_MQTTCommunication">SmartFactory_MQTTCommunication</a> for Adafruit Feather M0 Wifi</li>
<li><a href="https://github.com/philipzellweger/SmartFactory_MQTTCommunication">SmartFactory_MQTTCommunication</a> for Esp32 DevKitC</li>
<li><a href="https://github.com/philipzellweger/SmartFactory_I2cCommunication">SmartFactory_I2cCommunication</a></li>
<li><a href="https://github.com/philipzellweger/SmartFactory_Messages">SmartFactory_Messages</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
